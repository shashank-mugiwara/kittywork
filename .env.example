# Kittywork Environment Configuration Template
# Copy this file to .env and update values for your environment
# SECURITY WARNING: Never commit .env file with real credentials to version control!

# ============================================================
# Database Configuration
# ============================================================
# PostgreSQL connection details
DB_HOST=postgres
DB_PORT=5432
DB_NAME=kittywork
DB_USER=kittywork
DB_PASSWORD=kittywork_dev_password

# Liquibase configuration
SPRING_LIQUIBASE_ENABLED=true
SPRING_LIQUIBASE_CHANGE_LOG=classpath:/db/changelog/db.changelog-master.yaml

# ============================================================
# AWS S3 Configuration (for Resume Storage)
# ============================================================
# S3 bucket name (must be created in AWS first)
AWS_S3_BUCKET=kittywork-resumes-dev

# AWS region (e.g., us-east-1, us-west-2, eu-west-1)
AWS_S3_REGION=us-east-1

# AWS IAM credentials
# IMPORTANT: For local development and Docker Compose, you have three options:
#
# 1. IAM User Access Keys (development only - NEVER use in production)
#    - Generate at: https://console.aws.amazon.com/iam/home?#/security_credentials
#    - Access Key ID format: AKIA... (20 characters)
#    - Secret Access Key format: long random string
#    Example:
#    AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
#    AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
#
# 2. IAM Role (recommended for production - EC2/ECS/EKS)
#    - Attach IAM role to EC2/ECS/EKS instance with S3 access policy
#    - Leave both fields empty; SDK will automatically use role credentials
#    Example:
#    AWS_ACCESS_KEY_ID=
#    AWS_SECRET_ACCESS_KEY=
#
# 3. AWS Credentials File (~/.aws/credentials on local machine)
#    - Automatically detected by AWS SDK if on same machine
#    - Useful for local development with named profiles
#
# For Docker Compose: Use option 1 or 2 above
# For Production (EC2/EKS): Use option 2 (IAM role) - DO NOT use hardcoded credentials
#
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# ============================================================
# Spring Boot Configuration
# ============================================================
# Active profiles: docker, dev, staging, prod
SPRING_PROFILES_ACTIVE=docker

# Application port
APP_PORT=8080
SERVER_PORT=8080

# Logging levels
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_KITTYWORK=INFO

# ============================================================
# JVM Tuning (for container environments)
# ============================================================
# Heap memory settings (adjust based on container limits)
# -Xms: initial heap size
# -Xmx: maximum heap size
# -XX:+UseG1GC: garbage collection strategy for containers
# -XX:MaxGCPauseMillis: target max garbage collection pause time (ms)
# -XX:+ParallelRefProcEnabled: parallel reference processing for low-latency GC
#
# For containers: set -Xmx to 75% of container memory limit
# Example for 1GB container: -Xmx768m -Xms512m
JAVA_OPTS=-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+ParallelRefProcEnabled -Xmx512m -Xms256m

# ============================================================
# Application Feature Flags
# ============================================================
# Enable/disable S3 integration (true for production, false for local file storage)
FEATURE_S3_ENABLED=true

# Resume file size limit (in bytes, default 10MB)
FILE_UPLOAD_MAX_SIZE=10485760

# Supported resume file types (comma-separated MIME types)
# Currently configured for PDF only per project requirements
FILE_UPLOAD_ALLOWED_TYPES=application/pdf

# ============================================================
# Email Configuration (Optional, for future notifications)
# ============================================================
# SMTP server details
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_FROM=noreply@kittywork.local

# ============================================================
# Security Configuration
# ============================================================
# Session timeout (in seconds, default 30 minutes)
SERVER_SERVLET_SESSION_TIMEOUT=1800

# CORS allowed origins (comma-separated)
# In Docker: add http://localhost:3000 if frontend runs in separate container
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================================
# Monitoring & Actuator Configuration
# ============================================================
# Enable Spring Boot Actuator endpoints for health checks
# health: application health status
# info: application info and version
# metrics: application metrics (CPU, memory, threads, etc.)
# prometheus: Prometheus metrics endpoint (if Micrometer Prometheus enabled)
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized

# ============================================================
# Docker Compose Specific
# ============================================================
# PostgreSQL volume mount (for data persistence)
POSTGRES_DATA_VOLUME=postgres_data

# Application logs volume mount
APP_LOGS_VOLUME=./logs

# File uploads volume mount
APP_UPLOADS_VOLUME=./uploads
